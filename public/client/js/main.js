// Generated by CoffeeScript 2.5.1
(function() {
  'use strict';
  var hdr, hdrArea, header, qs, setBtnNav, startDelay, startType;

  qs = function(e) {
    return document.querySelectorAll(e);
  };

  hdr = qs('#desktop')[0];

  hdrArea = qs('#header-area')[0];

  setBtnNav = function() {
    var arr, path;
    arr = window.location.pathname.split('/');
    path = arr[arr.length - 1];
    qs('.btn-nav').forEach(function(e) {
      if (![void 0, null].includes(e.dataset.nav)) {
        if (e.dataset.nav === path) {
          e.classList.add('selected');
          e.removeAttribute('onclick');
        } else {
          e.classList.remove('selected');
          e.setAttribute('onclick', `window.location.pathname = '/${e.dataset.nav}';`);
        }
      }
    });
  };

  header = function(c) {
    if (c) {
      return hdr.style.transform = 'translate(0,0)';
    } else {
      return hdr.style.transform = 'translate(0,-100%)';
    }
  };

  startType = function() {
    qs('.type').forEach(function(e) {
      var delay, id, speed, stop, str, style;
      str = e.innerText;
      e.innerText = '';
      delay = e.dataset.typeDelay;
      stop = e.dataset.typeStop;
      speed = e.dataset.typeSpeed;
      id = Math.random().toString().substr(2, 8);
      style = document.createElement('style');
      style.setAttribute('type', 'text/css');
      document.head.appendChild(style);
      if (!delay) {
        delay = 0;
      }
      if (stop) {
        e.id = `id${id}`;
      }
      if (!speed) {
        speed = 75;
      } else {
        speed = speed * 1000;
      }
      setTimeout((function() {
        var arr;
        arr = str.split('');
        arr.push(null);
        e.style.opacity = '1';
        arr.forEach(function(f, j, b) {
          setTimeout((function() {
            if (j < b.length - 1) {
              e.innerText += str[j];
            } else if (stop) {
              setTimeout((function() {
                style.innerHTML = `\#id${id}::after { opacity: 0 !important; }`;
              }), 750);
            }
          }), j * speed);
        });
      }), delay * 1000);
    });
  };

  startDelay = function() {
    qs('.delay').forEach(function(e) {
      if (e.dataset.delay) {
        setTimeout((function() {
          e.style.opacity = '1';
        }), e.dataset.delay * 1000);
      }
    });
  };

  qs('.btn-nav-drop').forEach(function(e, i) {
    var arr, cnt;
    e.setAttribute('tabindex', i);
    arr = Array.prototype.slice.call(e.querySelectorAll('*'));
    cnt = e.querySelector('.cnt');
    arr.push(e);
    cnt.style.top = `${hdr.clientHeight + 10}px`;
    arr.forEach(function(f) {
      f.addEventListener('focus', function() {
        cnt.style.transform = 'translate(0,0)';
        cnt.style.opacity = '1';
      });
      f.addEventListener('blur', function() {
        cnt.style.transform = 'translate(0,-100%)';
        cnt.style.opacity = '0';
      });
    });
  });

  qs('a').forEach(function(e) {
    e.title = e.href;
  });

  qs('span').forEach(function(e) {
    if (Object.keys(e.dataset).length) {
      if (e.dataset.ins === 'currentYear') {
        e.innerHTML += (new Date()).getFullYear();
      }
    }
  });

  qs('#btn-nav-header-search')[0].addEventListener('click', function() {
    qs('#input-header-search')[0].focus();
  });

  hdrArea.addEventListener('mouseover', function() {
    header(true);
  });

  document.body.onscroll = function() {
    if (window.scrollY > 0) {
      header(true);
    } else {
      header(false);
    }
  };

  document.body.onload = function() {
    setBtnNav();
    startType();
    startDelay();
    qs('#cnt')[0].style.opacity = '1';
    document.body.style.overflowY = 'auto';
  };

}).call(this);
